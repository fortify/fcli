# yaml-language-server: $schema=https://fortify.github.io/fcli/schemas/action/fcli-action-schema-1.0.json
schemaVersion: '1.0'
# The yaml-language-server line above tells most IDE's & YAML editors where to find 
# the fcli action schema for validation & code completion. Please make sure that the 
# referenced schema name matches the schemaVersion property above.

usage:
  header: (SAMPLE) Check security policy. 
  description: |
    This sample action demonstrates how to implement a security policy using
    fcli actions, returning a non-zero exit code if any of the checks fail.

defaults:
  requestTarget: fod
  
parameters:
  - name: release
    cliAliases: rel
    description: "Required release id or <appName>:[<microserviceName>:]<releaseName>"
    type: release_single
  
steps:
  - check:
    - displayName: FoD Security Policy must Pass
      passIf:      ${parameters.release.isPassed}
  - check:
    - displayName: FoD Star rating must be at least 2 stars
      passIf:      ${parameters.release.rating>=2}
      
